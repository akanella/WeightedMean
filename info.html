<!DOCTYPE html>
<html>
<meta charset="utf-8">

<head>
    <title data-translate="Weighted Mean">Weighted Mean</title>
    <script src="js/jquery.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/bootstrap.min.js"></script>
    <script src="js/translation.js"></script>
    <script src="js/chart.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}
</style>

<body style="padding-bottom: 90px;">
    <div class="row col-12" style="margin-bottom:30px">
        <div class="col-10">
            <b data-translate="Weighted Mean Calculator">Weighted Mean Calculator</b>
            <span>v. 1.1</span>
            <span> | </span>
            <span><a href="index.html" data-translate="back to the app">back to the app</a></span>
        </div>
        <div class="col-2">
            <span style="cursor:pointer" class="languages" data-lang="eng"> en </span>
            <span> | </span>
            <span style="cursor:pointer" class="languages" data-lang="fr"> fr </span>
            <span> | </span>
            <span style="cursor:pointer" class="languages" data-lang="de"> de </span>
        </div>
    </div>

    <div class="bodywrapper container">
        <span class="translatable translate-eng">
            When we have multiple measurments of the same quantity, we usually use the arithemtic mean in order to find its true value. We can also estimate the uncertainty of our estimation by using, for example, a standard deviation of all the measurements. However, the arithmetic mean does not take into accout differences in precision of each measurement which are express by the provided uncertainties.<br><br>

            In order to calculate the mean value of such a dataset \( \langle x \rangle _{w} \), we use the weighted arithmetic mean. It is similar to an ordinary arithmetic mean (the most common type of average), but each data point is multiplied by a weight \( w_i \) with some data points contribute more than others. Another difference is in a denominator - instead of a number of measurements, a sum of weights is used.
        </span>

        <span class="translatable translate-eng">
            $$ \langle x \rangle _{w} = \frac{ \sum_{i=1}^{N} w_i x_i }{ \sum_{i=1}^{N} w_i } $$
        </span>

        <span class="translatable translate-eng">
            Note that when all the weigths are identical, the formula is reduced into a "normal" arithmetic mean.<br><br>

            A commonly used set of weights are inverse variances \( w_i = 1/\sigma_i^2 \). This choice guarantees that the smaller the variance (the more precise the mesurement), the higher the importance of the data point is.
        </span>
        <span class="translatable translate-fr">Pas encore de support en français.<br><br></span>
        <span class="translatable translate-de">Noch kein Support auf Deutsch.<br><br></span>

        <span class="translatable translate-eng">Thus, the weighted arithmetic mean becomes:</span>
        <span class="translatable translate-fr">La définition de la moyenne arithmétique pondérée:</span>
        <span class="translatable translate-de">Die Definition des gewichtetes arithmetisches Mittel:</span>
        <span>
            $$ \langle x \rangle _{w} = \frac{ \sum_{i=1}^{N} \frac{x_i}{\sigma_i^2} }{ \sum_{i=1}^{N} \frac{1}{\sigma_i^2} } $$
        </span>

        <span class="translatable translate-eng">and the statistical variance of the weighted mean is:</span>
        <span class="translatable translate-fr">La définition de la variance statistique de la moyenne pondérée:</span>
        <span class="translatable translate-de">Die Definition der statistischen Varianz des gewichteten Mittels:</span>
        <span>
            $$ \sigma_{x, stat}^2 = \frac{1}{\sum_{i=1}^{N} \frac{1}{\sigma_i^2}} $$
        </span>

        <span class="translatable translate-eng">
            Weighted means are typically used to find the weighted mean of experimental data where typical experiemntal errors may be underestimted or ommited in calculating the variance of each data point. To accomodate this fact, the variance needs to be corrected by the reduced \( \chi^2 \) of the mean :
        </span>
        <!-- <span class="translatable translate-eng">Definition of the sample-scatter variance of the weighted mean:</span> -->
        <span class="translatable translate-fr">La définition de la variance de dispersion d'échantillon de la moyenne pondérée:</span>
        <span class="translatable translate-de">Definition der Stichprobenstreuvarianz des gewichteten Mittels:</span>
        <span>
            $$ \sigma_{x, scatter}^2 = \sigma_{x, stat}^2 \; \chi_{red}^2 = \frac{1}{\left( N-1 \right)} \frac{ \sum_{i=1}^{N} \left( \frac{x_i - \langle x \rangle _{w} }{ \sigma_i } \right) ^2 }{ \sum_{i=1}^{N} \frac{1}{\sigma_i^2}  } $$
        </span>
        <span class="translatable translate-eng">The true variance is always the biggest of the two:</span>
        <span class="translatable translate-fr">La variance vrai est toujours la plus grande des deux:</span>
        <span class="translatable translate-de">Die wahre varianz ist immer die größte der beiden:</span>
        <span>$$ \sigma_x^2 = max \left\{ \sigma_{x, stat}^2, \sigma_{x, scatter}^2 \right\} $$</span>

        <span class="translatable translate-eng">
            Note that correlations between the data points are not taken into account in this formalism. A detailed overview of uncertainty propagation including correlations can be found <a href="https://en.wikipedia.org/wiki/Propagation_of_uncertainty#Non-linear_combinations">here</a>. <br><br>

            More information about the weighted arithemtic mean formalism can be found <a href="https://en.wikipedia.org/wiki/Weighted_arithmetic_mean">here</a>. <br><br>

            <small>Many thanks to M. Stryjczyk for reviewing the english text.</small>
        </span>

        <span class="translatable translate-eng">
            
        </span>
    </div>

    <div class="row col-12"
        style="position:fixed; bottom:0px; text-align: left; width:100%; background:white; height: 50px">
        <div class="col-10">
            <small class="form-text text-muted"> &copy; 2021. This work is licensed under a <a rel="license"
                    href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0 license</a>. <br><span>Created by
                    G. Skarakis and A. Kanellakopoulos</span>
        </div>
        <div class="col-2">
            <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/"><img
                    alt="Creative Commons Public Domain Dedication" style="border-width:0"
                    src="https://licensebuttons.net/l/zero/1.0/88x31.png" /></a>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            var lang = 'eng'; var myChart = null;
			
            function t(value) {
                switch (lang) {
                    case 'fr':
                        if (french[value]) {
                            return french[value];
                        }
                    case 'de':
                        if (german[value]) {
                            return german[value];
                        }
                    default:
                        return value;
                }
            }

            function translate() {
                $('*[data-translate]').each(function () {
                    let translation = t($(this).data('translate'));
                    if ($(this).is("input")) {
                        $(this).val(translation);
                    } else {
                        $(this).html(translation);
                    }
                });
				
				$('.translatable').hide();
				$('.translatable.translate-'+lang).show();
            }

            if (typeof (Storage) !== "undefined") {
                let storedlang = localStorage.getItem("language");
                if (storedlang) {
                    lang = storedlang;
                    translate();
                }
            }

            $('.languages').on('click', function () {
                lang = $(this).data('lang');
                translate();
                if (typeof (Storage) !== "undefined") {
                    localStorage.setItem("language", lang);
                }
            })
        })
    </script>
</body>

</html>